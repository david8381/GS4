<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Adventurer's Guild Badge Planner</title>
    <link rel="stylesheet" href="styles.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Besley:wght@400;600&family=IBM+Plex+Mono:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
  </head>
  <body data-page="badge">
    <div class="page">
      <div data-header></div>

      <main class="calculator">
        <section class="calc-intro">
          <p class="eyebrow">Adventurer's Guild</p>
          <h1>Badge Planner + Recharge Estimator</h1>
          <p>
            Enter your lifetime bounty points and current badge setup, then tweak levels with +/- to see
            BP impact, boost changes, and recharge cost changes.
          </p>
        </section>

        <section class="calc-panel">
          <div class="input-block">
            <div class="header-bridge" aria-hidden="true">
              <select id="badgeProfileSelect">
                <option value="">Select from Profile</option>
              </select>
              <button id="badgeProfileLoad" type="button">Load</button>
            </div>

            <div class="input-group">
              <label for="lifetimeBp">Lifetime Bounty Points</label>
              <div class="input-row">
                <input id="lifetimeBp" type="number" min="0" step="1000" value="0" />
                <span class="unit">BP</span>
              </div>
            </div>

            <div class="input-group inline-actions">
              <button class="btn badge-profile-save" id="badgeProfileSave" type="button">Update Profile Badge</button>
              <button class="btn badge-profile-reload" type="button">Reload from Profile</button>
            </div>
            <div class="helper" id="badgeProfileStatus">Save disabled: select a character profile first.</div>
          </div>

          <div class="summary-block">
            <div class="summary-card">
              <div class="summary-title">Total Upgrade Cost</div>
              <div class="summary-value" id="upgradeCost">0</div>
              <div class="summary-sub">Lifetime-invested badge value</div>
            </div>
            <div class="summary-card">
              <div class="summary-title">Lifetime BP Remaining</div>
              <div class="summary-value" id="bpRemaining">0</div>
              <div class="summary-sub" id="slotSummary">Slots: 0 / 3</div>
            </div>
            <div class="summary-card">
              <div class="summary-title">Recharge Cost (ORDER 5)</div>
              <div class="summary-value" id="rechargeCost">0</div>
              <div class="summary-sub" id="powerSummary">Enhancive power: 0 / 0</div>
            </div>
          </div>
        </section>

        <section class="notes">
          <div class="helper" id="validationMessage">Configuration valid.</div>
        </section>

        <section class="table-panel">
          <div class="inline-actions">
            <h2>Badge Components</h2>
            <button class="btn badge-profile-save" type="button">Update Profile Badge</button>
            <button class="btn badge-profile-reload" type="button">Reload from Profile</button>
          </div>
          <table>
            <thead>
              <tr>
                <th>Component</th>
                <th>Level</th>
                <th>Next Upgrade Cost</th>
                <th>Total Invested</th>
              </tr>
            </thead>
            <tbody id="componentTable"></tbody>
          </table>
        </section>

        <section class="table-panel">
          <div class="inline-actions">
            <h2>Enhancement Configuration</h2>
            <button class="btn badge-profile-save" type="button">Update Profile Badge</button>
            <button class="btn badge-profile-reload" type="button">Reload from Profile</button>
          </div>
          <table>
            <thead>
              <tr>
                <th>Slot</th>
                <th>Boost</th>
                <th>Value</th>
                <th>Max</th>
                <th>Req Upgrades</th>
                <th>Recharge Cost</th>
              </tr>
            </thead>
            <tbody id="boostTable"></tbody>
          </table>
        </section>

        <details class="collapsible-section">
          <summary>References</summary>
          <div class="collapsible-body">
            <section class="notes">
              <ul>
                <li><a href="https://gswiki.play.net/Adventurer%27s_Guild_Badge" target="_blank" rel="noopener noreferrer">GSWiki: Adventurer's Guild Badge</a></li>
                <li><a href="https://gswiki.play.net/Bounty_points" target="_blank" rel="noopener noreferrer">GSWiki: Bounty Points</a></li>
              </ul>
            </section>
          </div>
        </details>

        <details class="collapsible-section">
          <summary>Page Tests</summary>
          <div class="collapsible-body">
            <section class="table-panel">
              <h2>Planner Self-Tests</h2>
              <div class="inline-actions">
                <button class="btn" id="runBadgeTests" type="button">Run Test Cases</button>
                <button class="btn badge-profile-save" type="button">Update Profile Badge</button>
                <button class="btn badge-profile-reload" type="button">Reload from Profile</button>
              </div>
              <pre id="testOutput" class="test-output">No tests run yet.</pre>
              <div class="input-group">
                <label for="stateJson">State JSON</label>
                <textarea id="stateJson" rows="10" placeholder='{"lifetimeBp":0,"components":[0,0,0,0,0],"boosts":[{"id":1,"value":0},{"id":22,"value":0},{"id":87,"value":0}]}'></textarea>
              </div>
              <div class="inline-actions">
                <button class="btn" id="validateStateJson" type="button">Validate</button>
              </div>
              <div class="helper" id="stateJsonStatus">JSON state is synced from current planner values.</div>
            </section>
          </div>
        </details>
      </main>

      <div data-footer></div>
    </div>

    <script src="site.js" defer></script>
    <script src="badge.js"></script>
  </body>
</html>
