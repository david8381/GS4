<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Experience Burn-Down Calculator</title>
    <link rel="stylesheet" href="styles.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Besley:wght@400;600&family=IBM+Plex+Mono:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
  </head>
  <body data-page="calculator">
    <div class="page">
      <div data-header></div>

      <main class="calculator">
        <section class="calc-intro">
          <p class="eyebrow">Experience + Resources</p>
          <h1>Field Experience Burn-Down</h1>
          <p>
            Enter your current field experience and logic bonus to estimate absorption time and resources
            earned in common scenarios.
          </p>
        </section>

        <section class="calc-panel">
          <div class="input-block">
            <div class="input-group">
              <label for="currentExp">Current Field Experience</label>
              <div class="input-row">
                <input id="currentExp" type="number" min="0" step="1" value="1000" />
                <span class="unit">xp</span>
              </div>
            </div>

            <div class="input-group">
              <label for="logicBonus">Logic Bonus</label>
              <div class="input-row">
                <input id="logicBonus" type="number" step="1" value="20" />
              </div>
            </div>

            <div class="input-group">
              <label>Scenario</label>
              <div class="radio-stack">
                <label class="radio-row">
                  <input type="radio" name="scenarioMode" value="on-node" checked />
                  <span>On-Node (Town)</span>
                </label>
                <label class="radio-row">
                  <input type="radio" name="scenarioMode" value="in-town" />
                  <span>In-Town (Off-Node)</span>
                </label>
                <label class="radio-row">
                  <input type="radio" name="scenarioMode" value="out-town" />
                  <span>Out-of-Town</span>
                </label>
                <label class="radio-row">
                  <input type="radio" name="scenarioMode" value="offline" />
                  <span>Offline</span>
                </label>
              </div>
            </div>
          </div>

          <div class="summary-block">
            <div class="summary-card">
              <div class="summary-title">Selected Scenario</div>
              <div class="summary-value" id="selectedScenario">On-Node (Town)</div>
              <div class="summary-sub" id="totalTime">Total Time: 0m</div>
            </div>
            <div class="summary-card">
              <div class="summary-title">Total Resources</div>
              <div class="summary-value" id="totalResources">0</div>
              <div class="summary-sub" id="avgAbsorb">Avg Absorb: 0.0</div>
            </div>
          </div>
        </section>

        <section class="chart-panel">
          <div class="chart-header">
            <div>
              <h2>Selected Scenario Trend</h2>
              <p>Single chart view: XP remaining, absorb per pulse, and resource gain per pulse.</p>
            </div>
            <div class="legend" id="legend"></div>
          </div>
          <canvas id="trendChart" width="960" height="360"></canvas>
        </section>

        <section class="table-panel">
          <h2>Selected Scenario Breakdown</h2>
          <table>
            <thead>
              <tr>
                <th>Scenario</th>
                <th>Total Time</th>
                <th>Pulses / Intervals</th>
                <th>Total Resources</th>
                <th>Avg XP / Pulse</th>
              </tr>
            </thead>
            <tbody id="results"></tbody>
          </table>
        </section>

        <section class="notes">
          <ul>
            <li>On-node and in-town use logic bonus / 5. Out-of-town uses logic bonus / 7.</li>
            <li>Pool bonus is +1 absorb per 200 unabsorbed field exp, capped at +10.</li>
            <li>Online pulse is fixed at 60 seconds, with 85 resources if that pulse absorbs at least 20 XP.</li>
            <li>Offline is fixed at 15 XP and 25 resources per 10-minute interval.</li>
            <li>Vertical grid lines are every 5 minutes. Hover to inspect exact values at a pulse.</li>
          </ul>
        </section>

      </main>

      <div data-footer></div>
    </div>

    <script src="site.js" defer></script>
    <script src="app.js"></script>
  </body>
</html>
